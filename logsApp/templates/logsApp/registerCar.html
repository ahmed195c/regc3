{% extends "logsApp/layout.html" %} {% block body %}
<div class="main">
  <h1>{{inUseErr}}</h1>

  <div class="forms-cont">
    <div class="regCont">
      <h2>لاستلام المركبه</h2>
      <form action="{% url 'logsApp:add' %}" dir="rtl" method="post">
        {% csrf_token %}
        <div class="input-cont">
          <label class="labels" for="ceoNumber">الرقم الاداري</label>
          <input
            class="inpute"
            type="text"
            name="ceoNumber"
            id="ceoNumber"
            required
            placeholder="مثال: 23945"
          />

          <div class="msg-cont">
            {% if empDoseNotEXISTS %}
            <div
              id="error-message"
              style="
                background-color: #f8d7da;
                color: #721c24;
                padding: 10px;
                border: 1px solid #f5c6cb;
                border-radius: 5px;
                margin-bottom: 20px;
              "
            >
              {{ empDoseNotEXISTS }}
            </div>
            <script>
              hideErrorMessage("error-message");
            </script>
            {% endif %}
          </div>
          {% if EmpMErr %}
          <h3>{{EmpMErr}}</h3>
          {% endif %} {% if InUseCar_exists %} {{InUseCar_exists}} {% endif %}
        </div>
        <div class="input-cont">
          <label class="labels" for="carNumber">رقم السياره</label>
          <input
            class="inpute"
            type="text"
            name="carNumber"
            id="carNumber"
            placeholder="1-46793"
            required
          />

          <div class="msg-cont">
            {% if carDNE %}
            <div
              id="error-message-car"
              style="
                background-color: #f8d7da;
                color: #721c24;
                padding: 10px;
                border: 1px solid #f5c6cb;
                border-radius: 5px;
                margin-bottom: 20px;
              "
            >
              {{carDNE}}
            </div>

            <script>
              setTimeout(function () {
                var message = document.getElementById("error-message-car");
                if (message) {
                  message.style.transition = "opacity 1s ease-out";
                  message.style.opacity = 0;
                  setTimeout(function () {
                    message.style.display = "none";
                  }, 1000);
                }
              }, 5000);
            </script>
            {% endif %}
          </div>

          {% if inuse %}
          <h3>{{inuse}}</h3>
          {% else %}
          <h1>{{inuse}}</h1>
          {% endif %}
          <input class="submit-btn" type="submit" value="تسجيل المركبه" />

          <div>
            <div class="msg-cont">
              {% if sucssuMessge %}
              <div
                id="reg-succ-message"
                style="
                  background-color: #d4edda;
                  color: #155724;
                  padding: 10px;
                  border: 1px solid #c3e6cb;
                  border-radius: 5px;
                  margin-bottom: 20px;
                  transition: opacity 1s ease-out;
                "
              >
                {{sucssuMessge}}
              </div>

              <script>
                setTimeout(function () {
                  var message = document.getElementById("reg-succ-message");
                  if (message) {
                    message.style.transition = "opacity 1s ease-out";
                    message.style.opacity = 0;
                    setTimeout(function () {
                      message.style.display = "none";
                    }, 1000);
                  }
                }, 5000);
              </script>
              {% endif %}
            </div>
          </div>
        </div>
      </form>
    </div>
    <div class="regCont">
      <h2>لإعادة المركبه</h2>
      <form action="{% url 'logsApp:ret' %}" dir="rtl" method="post">
        {% csrf_token %}
        <div class="input-cont">
          <label class="labels" for="ceonumber"> الرقم الاداري </label>
          <input class="inpute" type="number" name="ceonumber" id="ceonumber" />

          <div class="msg-cont">
            {% if retErrm %}
            <div
              id="ret-err-message"
              style="
                background-color: #f8d7da;
                color: #721c24;
                padding: 10px;
                border: 1px solid #f5c6cb;
                border-radius: 5px;
                margin-bottom: 20px;
              "
            >
              {{retErrm}}
            </div>

            <script>
              setTimeout(function () {
                var message = document.getElementById("ret-err-message");
                if (message) {
                  message.style.transition = "opacity 1s ease-out";
                  message.style.opacity = 0;
                  setTimeout(function () {
                    message.style.display = "none";
                  }, 1000);
                }
              }, 5000);
            </script>
            {% endif %}
          </div>
        </div>
        <div class="input-cont">
          <label class="labels" for="note">ملاحظه على السياره</label>
          <input class="inpute" type="text" id="note" name="empnote" />

          <div class="msg-cont">
            {% if retCarErr %}
            <div
              id="ret-err-message"
              style="
                background-color: #f8d7da;
                color: #721c24;
                padding: 10px;
                border: 1px solid #f5c6cb;
                border-radius: 5px;
                margin-bottom: 20px;
              "
            >
              {{retCarErr}}
            </div>

            <script>
              setTimeout(function () {
                var message = document.getElementById("ret-err-message");
                if (message) {
                  message.style.transition = "opacity 1s ease-out";
                  message.style.opacity = 0;
                  setTimeout(function () {
                    message.style.display = "none";
                  }, 1000);
                }
              }, 5000);
            </script>
            {% endif %}
          </div>
          <input class="submit-btn" type="submit" value="إعادة المركبه" />

          <div class="msg-cont">
            {% if retSucssM %}
            <div
              id="ret-err-message"
              style="
                background-color: #d4edda;
                color: #155724;
                padding: 10px;
                border: 1px solid #c3e6cb;
                border-radius: 5px;
                margin-bottom: 20px;
                transition: opacity 1s ease-out;
              "
            >
              {{retSucssM}}
            </div>

            <script>
              setTimeout(function () {
                var message = document.getElementById("ret-err-message");
                if (message) {
                  message.style.transition = "opacity 1s ease-out";
                  message.style.opacity = 0;
                  setTimeout(function () {
                    message.style.display = "none";
                  }, 1000);
                }
              }, 5000);
            </script>
            {% endif %}
          </div>
        </div>
      </form>
    </div>

    {% if message %}
    <h1>message</h1>
    {% endif %}
  </div>

  <div><h1>مركبات قيد الاستخدام</h1></div>
  <div class="inuseBorder">
    <div class="inUsCont">
      {% if l %} {% for n in l %}
      <div class="car-details">
        <div class="details">
          <div class="info">
            <p class="info-p">اسم المستخدم: {{n.employee.ceoName}}</p>
            <div class="br"></div>
            <p class="info-p">الرقم الاداري: {{n.employee.ceoNumber}}</p>
            <div class="br"></div>
            <div>
              <p>{{n.employee.section}}</p>
            </div>
            <div class="br"></div>
            <div class="car-plate">
              <p>{{n.car.carNumber}}</p>
              <p>رقم اللوحه</p>
            </div>
            <div class="br"></div>
            <p>تاريخ و وقت الاستلام</p>
            <p class="created-at">{{ n.created_at|date:"Y-m-d / h:i A" }}</p>
          </div>
        </div>
      </div>
      {% endfor %} {% else %}
      <h1>لاتوجد مركبات قيد الاستخدام</h1>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}
